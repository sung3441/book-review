# 상속과 위임

### 상속

자식 클래스는 부모 클래스에 선언된 필드와 메서드를 사용할 수 있다.

이를 부모가 자식에게 물려주는 것에 비유해서 __상속__ 이라고 부른다.

### 위임

다른 인스턴스의 메서드를 호출해서 처리하는 것을 __위임__ 이라고 한다.

```java
class Delegated {

    void method() {
        // ...
    }
}

class Client {
    
    Delegated delegate;
    
    // Delegated 인스턴스에게 처리 위임
    void method() {
        delegate.method();
    }
}
```

### 상속과 위임

__상속은 클래스 사이의 관계__ 이고, __위임은 인스턴스 사이의 관계__ 이다.  
상위 클래스에서 상속받을 메서드나 필드는 인스턴스마다 정할 수 없지만, 위임은 인스턴스마다 정할 수 있기 때문이다.

상속은 __정적인 관계__ 이고, 위임은 __동적인 관계__ 이다.  
상속 관계는 컴파일할 때 정해지고 실행 중에 변경할 수 없지만, 위임 관계는 실행 중에 변경할 수 있기 때문이다.

> 실행 중에도 상속 관계를 변경할 수 있는 언어가 있다. ex) 펄(Perl)

### 리팩토링 방법

1. 위임용 필드 도입
   1. 하위 클래스에 상위 클래스 타입의 위임용 필드 선언
   2. 생성자 안에서 위임용 필드를 __this__ 로 초기화
   3. 상속받던 메서드를 재작성해서 위임용 필드를 이용하게 함
   4. 컴파일 테스트
2. 상속 관계 삭제
   1. 상위 클래스 선언(extends) 삭제
   2. 위임용 필드를 상위 클래스의 인스턴스로 초기화
   3. 지금까지 외부에서 암묵적으로 이용하던 메서드를 명시적으로 선언
   4. 그 메서드를 위임용 필드 경유 호출로 작성
   5. 컴파일 테스트